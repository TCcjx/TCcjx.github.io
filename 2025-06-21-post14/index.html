<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>时态知识图谱外推任务指标计算中过滤策略选择问题 | 读书or跑步，旅行or思考</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="https://unpkg.com/normalize.css"><link rel="stylesheet" type="text/css" href="https://unpkg.com/purecss/build/pure-min.css"><link rel="stylesheet" type="text/css" href="https://unpkg.com/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="https://unpkg.com/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="https://unpkg.com/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="https://unpkg.com/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="https://unpkg.com/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="https://unpkg.com/toastr/build/toastr.min.css"><div class="darkmode-toggle">🌓</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 7.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">时态知识图谱外推任务指标计算中过滤策略选择问题</h1><a id="logo" href="/.">读书or跑步，旅行or思考</a><p class="description">硬性的标准其实限制不了无限可能的我们.</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">时态知识图谱外推任务指标计算中过滤策略选择问题</h1><div class="post-meta">2025-06-21<span> | </span><span class="category"><a href="/categories/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/">论文阅读笔记</a></span></div><div class="post-content"><h2 id="1-背景："><a href="#1-背景：" class="headerlink" title="1. 背景："></a>1. 背景：</h2><p>&ensp;&ensp;&ensp;&ensp;最初是在看论文的过程中，发现不同论文使用相同方法在相同数据集的相同评估指标竟然不一样，一开始觉得还在想是不是实验数据造假呢，后面无意在知乎上看到一篇博文(<em>参考资料[2]</em>)解答了我心中的困惑,也算是自己从一开始进入这个方向后，逐步学习成长的过程，很多理解也加深了。</p>
<h2 id="2-问题引入："><a href="#2-问题引入：" class="headerlink" title="2.问题引入："></a>2.问题引入：</h2><p>&ensp;&ensp;&ensp;&ensp;首先先介绍一下知识图谱外推任务的评估指标，常用的评估指标有MRR、Hit@1、Hit@3、Hit@5、Hit@10,MRR是外推默认预测正确实体排名的倒数和的均值，MRR的值范围在0-1之间,越接近1说明模型的外推性能越好，Hit@1\3\5\10是指模型的命中率，例如Hit@3,如果预测的正确实体位于top3的位置，则说明预测正确，反之，则预测错误，Hit指标的范围也是0-1之间，越高则说明预测的效果越好。<br>&ensp;&ensp;&ensp;&ensp;介绍完知识图谱外推任务后，我们来讲讲为什么采用过滤策略？不采用过滤策略会怎样？不采用过滤策略，则直接用模型的原始输出结果，来计算评估指标，不做任何其他处理，也就是<strong>Raw Metric</strong>度量，但是，后面有研究人员发现不合理，因为对待同一个查询(s,r,?),假如存在(s,r,A) 和 (s,r,B)两个事实存在，对于该查询，假如该数据样本的正确标签是(s,r,A)，那么预测出来的B，我们也不能说是错误预测，因为(s,r,B)也是正确预测的，但是由于B的存在，会影响最终模型评估指标的计算，从而影响我们合理的估计模型的外推能力，因此<strong>静态过滤策略</strong>在计算性能指标的时候，会将除了待预测实体之外的其他存在正确实体给移除。<em>（Static filter: To avoid counting higher ranks from other valid predictions as errors and thus having flaws in the metrics, Bordes et al. [19] propose to remove all triples (except the triple of interest) that appear in the train, valid, and test set from the list of corrupted triples.）</em><br>&ensp;&ensp;&ensp;&ensp;随着时态知识图谱外推任务的发展，越来越多的文章在该领域做工作。但是评估指标五花八门，也就造成了同样模型在相同数据集上结果在不同论文上却不一样，这也就为该领域发展造成了困扰，无法对比模型指标，评估模型的能力。<br>&ensp;&ensp;&ensp;&ensp;<strong>这样做也有一个好处，可以防止模型记住事实，从而真正去评估模型对事实的推理补全能力。</strong></p>
<h2 id="3-时间过滤策略是如何计算的？为什么更合理？"><a href="#3-时间过滤策略是如何计算的？为什么更合理？" class="headerlink" title="3. 时间过滤策略是如何计算的？为什么更合理？"></a>3. 时间过滤策略是如何计算的？为什么更合理？</h2><p>&ensp;&ensp;&ensp;&ensp;研究人员发现直接将在时态知识图谱上应用外推任务是不合理的，因为他直接将候选排名中的其他“正确”预测事实(只考虑事实本身，不考虑时间属性)进行排除，忽略了时间事实的有效性，就比如如果查询是(Barack Obama, visit, India, 2015-01-25),假设训练集中存在(Barack Obama, visit, Germany, 2013-01-18)，那么将这一事实过滤就是不合理的，为什么呢？因为2015-01-25这个时间点Barack Obama, visit, Germany就是一个错误的事实，因此我们不应该将这样的事实进行过滤，在**时间过滤策略（time filter metric）**中，过滤需要将时间戳也和查询事实的时间戳一致才会进行过滤。</p>
<p>&ensp;&ensp;&ensp;&ensp;<strong>细细一想是不是采用时间过滤策略就相当于不用进行处理了，因为验证集和测试集的时间是大于训练集的时间的，总不可能同一时间点，发生一模一样的事情吧，如果存在的话，那也说明在知识图谱构建过程中有问题，存在信息冗余。</strong></p>
<h2 id="4-常规时间过滤策略应该如何处理？"><a href="#4-常规时间过滤策略应该如何处理？" class="headerlink" title="4. 常规时间过滤策略应该如何处理？"></a>4. 常规时间过滤策略应该如何处理？</h2><p>&ensp;&ensp;&ensp;&ensp;在实际的评估中，应该采用的过滤策略是怎样的？仔细分析，什么样的实体是我们应该从候选实体列表中进行过滤的呢？假设第四天我同时找了A和B玩，<a target="_blank" rel="noopener" href="https://zhida.zhihu.com/search?content_id=232794076&content_type=Article&match_order=2&q=%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1&zhida_source=entity">知识图谱</a>中肯定同时包含这两个<a target="_blank" rel="noopener" href="https://zhida.zhihu.com/search?content_id=232794076&content_type=Article&match_order=1&q=%E5%9B%9B%E5%85%83%E7%BB%84&zhida_source=entity">四元组</a>（我，一起玩，A，第四天），（我，一起玩，B，第四天），那对这两个<a target="_blank" rel="noopener" href="https://zhida.zhihu.com/search?content_id=232794076&content_type=Article&match_order=1&q=%E4%B8%89%E5%85%83%E7%BB%84&zhida_source=entity">三元组</a>的预测都是针对查询（我，一起玩，？，第四天）的预测，但是答案分别时A和B。这样就可能出现一种情况，我在预测答案为A的四元组时B的分数更高，当然这在实际看来也是正确的，但是与答案A不匹配会被模型认为是错误的，所以我们需要采取过滤方式来避免这样的情况发生。因此我们对多个正确答案中的非目标答案进行过滤，这才是正确的在时间知识图谱推理补全任务中，应该采用的时间过滤策略。<em>（Time-aware filter: Han et al. [20] note that the static filter setting is inappropriate for temporal link prediction because it filters out all triples that have ever appeared from the list of corrupted triples,ignoring the time validity of facts. As a consequence, it does not consider predictions of such triplesas erroneous. For example, if there is a test query (Barack Obama, visit, India, 2015-01-25) and if the train set contains (Barack Obama, visit, Germany, 2013-01-18), the triple (Barack Obama, visit,Germany) is filtered out for the test query according to the static filter setting, even though it is not true for 2015-01-25 [2]. For this reason numerous works [2, 11, 8, 3, 9, 10] apply the time-awarefilter setting which only filters out quadruples with the same timestamp as the test query. In the above example, (Barack Obama, visit, Germany, t) would only be filtered out for the given test query, if it had the timestamp t &#x3D; 2015-01-25, and otherwise stay in the list of corrupted triples.）</em></p>
<p><strong>参考资料</strong>：</p>
<p>(1)参考论文：</p>
<p><a target="_blank" rel="noopener" href="https://openreview.net/forum?id=J_SNklR-KR">时态知识图谱过滤策略论文</a></p>
<p>(2)参考知乎博文：</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/650990917">时态知识图谱过滤方法</a></p>
</div><div class="tags"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hit-1-3-5-10/" rel="tag">Hit@1\3\5\10</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MRR/" rel="tag">MRR</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9B%BE%E8%B0%B1%E6%8E%A8%E7%90%86%E4%BB%BB%E5%8A%A1/" rel="tag">图谱推理任务</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%97%B6%E6%80%81%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/" rel="tag">时态知识图谱</a></li></ul></div><div class="post-nav"><a class="pre" href="/2025-07-09-post15_glue_code/">什么是glue code？</a><a class="next" href="/2025-06-19-post13_python%E8%84%9A%E6%9C%AC%E4%BC%A0%E5%85%A5%E5%8F%82%E6%95%B0/">python脚本传入参数</a></div><div id="container"></div><link rel="stylesheet" type="text/css" href="https://unpkg.com/gitalk/dist/gitalk.css"><script type="text/javascript" src="https://unpkg.com/blueimp-md5/js/md5.js"></script><script type="text/javascript" src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
  clientID: 'Ov23liT3T9eAceTuR6LX',
  clientSecret: 'caac43f4dbaef4c924c490d73d19723d2594392e',
  repo: 'TCcjx.github.io',
  owner: 'TCcjx',
  admin: ['TCcjx'],
  id: md5(location.pathname),
  distractionFreeMode: false
})
gitalk.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://tccjx.github.io"/></form></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="关于"><img class="nofancybox" src="/img/avatar.png"/></a><p>learning by doing,don't think too much</p><a class="info-icon" href="mailto:tcc2025@163.com" title="Email" target="_blank" style="margin-inline:5px"> <i class="fa fa-envelope-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://github.com/tccjx" title="Github" target="_blank" style="margin-inline:5px"> <i class="fa fa-github-square" style="margin-inline:5px"></i></a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AI/">AI</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A2%8E%E7%A2%8E%E5%BF%B5/">碎碎念</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E6%97%A5%E8%AE%B0/">编程日记</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/">论文阅读笔记</a><span class="category-list-count">5</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">深度学习</a> <a href="/tags/Transformer/" style="font-size: 15px;">Transformer</a> <a href="/tags/Attention/" style="font-size: 15px;">Attention</a> <a href="/tags/%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/" style="font-size: 15px;">注意力机制</a> <a href="/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/" style="font-size: 15px;">大模型</a> <a href="/tags/transfomer/" style="font-size: 15px;">transfomer</a> <a href="/tags/transfomers/" style="font-size: 15px;">transfomers</a> <a href="/tags/Bert/" style="font-size: 15px;">Bert</a> <a href="/tags/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/" style="font-size: 15px;">论文阅读笔记</a> <a href="/tags/TKGs/" style="font-size: 15px;">TKGs</a> <a href="/tags/%E8%A1%A5%E5%85%A8%E6%8E%A8%E7%90%86/" style="font-size: 15px;">补全推理</a> <a href="/tags/LLM/" style="font-size: 15px;">LLM</a> <a href="/tags/%E5%9B%BE%E7%BB%93%E6%9E%84%E4%BF%A1%E6%81%AF/" style="font-size: 15px;">图结构信息</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/%E6%97%B6%E6%80%81%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/" style="font-size: 15px;">时态知识图谱</a> <a href="/tags/%E5%9B%BE%E8%B0%B1%E6%8E%A8%E7%90%86%E4%BB%BB%E5%8A%A1/" style="font-size: 15px;">图谱推理任务</a> <a href="/tags/MRR/" style="font-size: 15px;">MRR</a> <a href="/tags/Hit-1-3-5-10/" style="font-size: 15px;">Hit@1\3\5\10</a> <a href="/tags/glue-code/" style="font-size: 15px;">glue code</a> <a href="/tags/%E8%83%B6%E6%B0%B4%E4%BB%A3%E7%A0%81/" style="font-size: 15px;">胶水代码</a> <a href="/tags/%E6%97%B6%E6%80%81%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%8E%A8%E7%90%86/" style="font-size: 15px;">时态知识图谱推理</a> <a href="/tags/%E4%BC%A0%E7%BB%9F%E8%A7%84%E5%88%99%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/" style="font-size: 15px;">传统规则学习方法</a> <a href="/tags/%E5%AF%B9%E6%AF%94%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">对比学习</a> <a href="/tags/contrastive-learning/" style="font-size: 15px;">contrastive learning</a> <a href="/tags/%E6%B8%A9%E5%BA%A6%E5%8F%82%E6%95%B0%CF%84/" style="font-size: 15px;">温度参数τ</a> <a href="/tags/%E6%97%B6%E6%80%81%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E8%A1%A5%E5%85%A8/" style="font-size: 15px;">时态知识图谱补全</a> <a href="/tags/KVCache/" style="font-size: 15px;">KVCache</a> <a href="/tags/LLMs/" style="font-size: 15px;">LLMs</a> <a href="/tags/Self-Attention/" style="font-size: 15px;">Self-Attention</a> <a href="/tags/NER/" style="font-size: 15px;">NER</a> <a href="/tags/vscode/" style="font-size: 15px;">vscode</a> <a href="/tags/%E7%BC%96%E7%A8%8B%E6%97%A5%E8%AE%B0/" style="font-size: 15px;">编程日记</a> <a href="/tags/debug/" style="font-size: 15px;">debug</a> <a href="/tags/%E6%B8%85%E5%8D%8E%E6%BA%90/" style="font-size: 15px;">清华源</a> <a href="/tags/pip/" style="font-size: 15px;">pip</a> <a href="/tags/%E5%BF%83%E8%B7%AF%E5%8E%86%E7%A8%8B/" style="font-size: 15px;">心路历程</a> <a href="/tags/%E5%AE%9E%E4%B9%A0%E6%80%BB%E7%BB%93/" style="font-size: 15px;">实习总结</a> <a href="/tags/CyGNet/" style="font-size: 15px;">CyGNet</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2025-08-16-post18_LCGE-%E5%9F%BA%E4%BA%8E%E9%80%BB%E8%BE%91%E5%92%8C%E5%B8%B8%E8%AF%86%E7%9A%84%E6%97%B6%E6%80%81%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%8E%A8%E7%90%86%E8%A1%A5%E5%85%A8%E6%A8%A1%E5%9E%8B/">论文阅读笔记---LCGE-基于逻辑和常识来实现时态知识图谱补全的方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2025-08-11-post17_GenTKG-%E4%BC%A0%E7%BB%9F%E8%A7%84%E5%88%99%E6%96%B9%E6%B3%95%E7%BB%93%E5%90%88%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%9A%84%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%8E%A8%E7%90%86%E6%A1%86%E6%9E%B6/">论文阅读笔记---LLM结合规则学习方法提出一种新的时态知识图谱推理框架</a></li><li class="post-list-item"><a class="post-list-link" href="/2025-07-15-post16_%E6%8D%9F%E5%A4%B1%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84%E6%B8%A9%E5%BA%A6%E5%8F%82%E6%95%B0%CF%84/">损失函数中的温度参数τ</a></li><li class="post-list-item"><a class="post-list-link" href="/2025-07-09-post15_glue_code/">什么是glue code？</a></li><li class="post-list-item"><a class="post-list-link" href="/2025-06-21-post14/">时态知识图谱外推任务指标计算中过滤策略选择问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2025-06-19-post13_python%E8%84%9A%E6%9C%AC%E4%BC%A0%E5%85%A5%E5%8F%82%E6%95%B0/">python脚本传入参数</a></li><li class="post-list-item"><a class="post-list-link" href="/2025-06-15-post12_%E5%A4%A7%E6%A8%A1%E5%9E%8B+%E5%9B%BE%E7%BB%93%E6%9E%84%E4%BF%A1%E6%81%AF%E8%9E%8D%E5%90%88/">论文阅读笔记---LLM + 图结构信息编码未知实体和关系进行TKGs补全任务</a></li><li class="post-list-item"><a class="post-list-link" href="/2025-06-12-post11/">基于Transformers库的命名实体识别</a></li><li class="post-list-item"><a class="post-list-link" href="/2025-06-09-post10_Attention/">编码注意力机制的梳理(自用-分享)</a></li><li class="post-list-item"><a class="post-list-link" href="/2025-06-03-post9_CyGNet/">论文阅读笔记---CyGNet阅读笔记-TKG推理任务</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://spaces.ac.cn/" title="科学空间(苏剑林)" target="_blank">科学空间(苏剑林)</a><ul></ul><a href="https://ysymyth.github.io/" title="姚顺雨" target="_blank">姚顺雨</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2025 <a href="/." rel="nofollow">读书or跑步，旅行or思考.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="https://unpkg.com/@fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="https://unpkg.com/@fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="复制成功！"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>